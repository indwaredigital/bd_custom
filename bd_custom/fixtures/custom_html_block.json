[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"sales-dashboard\">\r\n  <!-- Header -->\r\n  <div class=\"dashboard-header\">\r\n    <h1 class=\"dashboard-title\">Invoicing</h1>\r\n  </div>\r\n\r\n  <!-- Stats Cards -->\r\n  <div class=\"stats-grid\">\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-label\">Total Invoices</div>\r\n      <div class=\"stat-value total-invoices\">0</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-label\">Total Revenue</div>\r\n      <div class=\"stat-value total-revenue\">₹ 0</div>\r\n    </div>\r\n    <div class=\"stat-card pending-card\">\r\n      <div class=\"stat-label\">Pending Amount</div>\r\n      <div class=\"stat-value pending-amount\">₹ 0</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-label\">Overdue Invoices</div>\r\n      <div class=\"stat-value overdue-invoices\">0</div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Invoices Section -->\r\n  <div class=\"invoices-section\">\r\n    <div class=\"section-header\">\r\n      <h2 class=\"section-title\">Sales Invoices</h2>\r\n      <div class=\"action-buttons\">\r\n        <button class=\"view-report-btn\">View Report</button>\r\n        <button class=\"create-invoice-btn\">+ Create Invoice</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Loading State -->\r\n    <div class=\"loading-state\">\r\n      <div class=\"spinner\"></div>\r\n      <p>Loading invoices...</p>\r\n    </div>\r\n\r\n    <!-- Table -->\r\n    <div class=\"table-container\" style=\"display: none;\">\r\n      <table class=\"invoices-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Invoice No</th>\r\n            <th>Customer</th>\r\n            <th>Date</th>\r\n            <th>Amount</th>\r\n            <th>Status</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody class=\"invoices-tbody\">\r\n          <!-- Rows will be inserted here -->\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- Empty State -->\r\n    <div class=\"empty-state\" style=\"display: none;\">\r\n      <p>No invoices found</p>\r\n    </div>\r\n  </div>\r\n</div>",
  "modified": "2026-01-28 12:55:42.701307",
  "name": "Sales Invoice Dashboard",
  "private": 0,
  "roles": [],
  "script": "// Fetch and display dashboard data\r\nasync function loadDashboardData() {\r\n  try {\r\n    // Fetch invoice statistics\r\n    const stats = await frappe.call({\r\n      method: 'frappe.client.get_count',\r\n      args: {\r\n        doctype: 'Sales Invoice'\r\n      }\r\n    });\r\n\r\n    // Fetch total revenue\r\n    const revenue = await frappe.call({\r\n      method: 'frappe.client.get_list',\r\n      args: {\r\n        doctype: 'Sales Invoice',\r\n        fields: ['grand_total', 'outstanding_amount', 'status'],\r\n        filters: {},\r\n        limit_page_length: 0\r\n      }\r\n    });\r\n\r\n    // Calculate stats\r\n    const invoices = revenue.message || [];\r\n    const totalInvoices = invoices.length;\r\n    const totalRevenue = invoices.reduce((sum, inv) => sum + (inv.grand_total || 0), 0);\r\n    const pendingAmount = invoices.reduce((sum, inv) => sum + (inv.outstanding_amount || 0), 0);\r\n    const overdueInvoices = invoices.filter(inv => inv.status === 'Overdue').length;\r\n\r\n    // Update stat cards\r\n    root_element.querySelector('.total-invoices').textContent = totalInvoices.toLocaleString();\r\n    root_element.querySelector('.total-revenue').textContent = formatCurrency(totalRevenue);\r\n    root_element.querySelector('.pending-amount').textContent = formatCurrency(pendingAmount);\r\n    root_element.querySelector('.overdue-invoices').textContent = overdueInvoices.toLocaleString();\r\n\r\n    // Load recent invoices\r\n    await loadRecentInvoices();\r\n\r\n  } catch (error) {\r\n    console.error('Error loading dashboard data:', error);\r\n    frappe.msgprint('Failed to load dashboard data');\r\n  }\r\n}\r\n\r\n// Fetch and display recent invoices\r\nasync function loadRecentInvoices() {\r\n  try {\r\n    const response = await frappe.call({\r\n      method: 'frappe.client.get_list',\r\n      args: {\r\n        doctype: 'Sales Invoice',\r\n        fields: ['name', 'customer', 'posting_date', 'grand_total', 'status'],\r\n        order_by: 'posting_date desc',\r\n        limit_page_length: 10\r\n      }\r\n    });\r\n\r\n    const invoices = response.message || [];\r\n    const tbody = root_element.querySelector('.invoices-tbody');\r\n    const loadingState = root_element.querySelector('.loading-state');\r\n    const tableContainer = root_element.querySelector('.table-container');\r\n    const emptyState = root_element.querySelector('.empty-state');\r\n\r\n    // Hide loading\r\n    loadingState.style.display = 'none';\r\n\r\n    if (invoices.length === 0) {\r\n      emptyState.style.display = 'block';\r\n      return;\r\n    }\r\n\r\n    // Show table\r\n    tableContainer.style.display = 'block';\r\n\r\n    // Clear existing rows\r\n    tbody.innerHTML = '';\r\n\r\n    // Add invoice rows\r\n    invoices.forEach(invoice => {\r\n      const row = document.createElement('tr');\r\n      row.innerHTML = `\r\n        <td>${invoice.name}</td>\r\n        <td>${invoice.customer}</td>\r\n        <td>${formatDate(invoice.posting_date)}</td>\r\n        <td>${formatCurrency(invoice.grand_total)}</td>\r\n        <td><span class=\"status-badge status-${invoice.status.toLowerCase()}\">${invoice.status}</span></td>\r\n      `;\r\n      tbody.appendChild(row);\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error loading invoices:', error);\r\n    root_element.querySelector('.loading-state').innerHTML = '<p>Failed to load invoices</p>';\r\n  }\r\n}\r\n\r\n// Format currency\r\nfunction formatCurrency(amount) {\r\n  if (!amount) return '₹ 0';\r\n  \r\n  const value = parseFloat(amount);\r\n  \r\n  if (value >= 10000000) {\r\n    return '₹ ' + (value / 10000000).toFixed(1) + ' Cr';\r\n  } else if (value >= 100000) {\r\n    return '₹ ' + (value / 100000).toFixed(1) + ' L';\r\n  } else {\r\n    return '₹ ' + value.toLocaleString('en-IN', { maximumFractionDigits: 0 });\r\n  }\r\n}\r\n\r\n// Format date\r\nfunction formatDate(dateString) {\r\n  if (!dateString) return '';\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' });\r\n}\r\n\r\n// View Report button click handler\r\nconst viewReportBtn = root_element.querySelector('.view-report-btn');\r\nviewReportBtn.addEventListener('click', () => {\r\n  window.location.href = '/app/sales-invoice/view/report';\r\n});\r\n\r\n// Create Invoice button click handler\r\nconst createInvoiceBtn = root_element.querySelector('.create-invoice-btn');\r\ncreateInvoiceBtn.addEventListener('click', () => {\r\n  window.location.href = '/app/sales-invoice-entry';\r\n});\r\n\r\n// Initialize dashboard\r\nloadDashboardData();",
  "style": ".sales-dashboard {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\r\n  padding: 24px;\r\n  background: #f8f9fa;\r\n  min-height: 100vh;\r\n}\r\n\r\n.dashboard-header {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.dashboard-title {\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  color: #1f2937;\r\n  margin: 0;\r\n}\r\n\r\n/* Stats Grid */\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  gap: 16px;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.stat-card {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  transition: transform 0.2s, box-shadow 0.2s;\r\n}\r\n\r\n.stat-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n.stat-label {\r\n  font-size: 13px;\r\n  color: #6b7280;\r\n  margin-bottom: 6px;\r\n  font-weight: 500;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  color: #1f2937;\r\n}\r\n\r\n.pending-card .stat-value {\r\n  color: #dc2626;\r\n}\r\n\r\n/* Invoices Section */\r\n.invoices-section {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 24px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #1f2937;\r\n  margin: 0;\r\n}\r\n\r\n/* Action Buttons */\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.view-report-btn,\r\n.create-invoice-btn {\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.view-report-btn {\r\n  background: white;\r\n  color: #1e293b;\r\n  border: 2px solid #e5e7eb;\r\n}\r\n\r\n.view-report-btn:hover {\r\n  background: #f9fafb;\r\n  border-color: #1e293b;\r\n}\r\n\r\n.create-invoice-btn {\r\n  background: #1e293b;\r\n  color: white;\r\n}\r\n\r\n.create-invoice-btn:hover {\r\n  background: #0f172a;\r\n}\r\n\r\n/* Loading State */\r\n.loading-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  color: #6b7280;\r\n}\r\n\r\n.spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e5e7eb;\r\n  border-top-color: #1e293b;\r\n  border-radius: 50%;\r\n  animation: spin 0.8s linear infinite;\r\n  margin: 0 auto 16px;\r\n}\r\n\r\n@keyframes spin {\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n/* Table */\r\n.table-container {\r\n  overflow-x: auto;\r\n}\r\n\r\n.invoices-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.invoices-table thead {\r\n  background: #f9fafb;\r\n}\r\n\r\n.invoices-table th {\r\n  text-align: left;\r\n  padding: 12px 16px;\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  color: #6b7280;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.invoices-table td {\r\n  padding: 16px;\r\n  border-top: 1px solid #e5e7eb;\r\n  font-size: 14px;\r\n  color: #1f2937;\r\n}\r\n\r\n.invoices-table tbody tr {\r\n  transition: background 0.2s;\r\n}\r\n\r\n.invoices-table tbody tr:hover {\r\n  background: #f9fafb;\r\n}\r\n\r\n/* Status Badges */\r\n.status-badge {\r\n  display: inline-block;\r\n  padding: 5px 14px;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  border-left: 3px solid;\r\n}\r\n\r\n.status-paid {\r\n  background: #d1fae5;\r\n  color: #065f46;\r\n  border-left-color: #10b981;\r\n}\r\n\r\n.status-pending {\r\n  background: #fef3c7;\r\n  color: #92400e;\r\n  border-left-color: #f59e0b;\r\n}\r\n\r\n.status-overdue {\r\n  background: #fee2e2;\r\n  color: #991b1b;\r\n  border-left-color: #ef4444;\r\n}\r\n\r\n.status-draft {\r\n  background: #e0e7ff;\r\n  color: #3730a3;\r\n  border-left-color: #6366f1;\r\n}\r\n\r\n.status-cancelled {\r\n  background: #f3f4f6;\r\n  color: #4b5563;\r\n  border-left-color: #9ca3af;\r\n}\r\n\r\n.status-submitted {\r\n  background: #dbeafe;\r\n  color: #1e40af;\r\n  border-left-color: #3b82f6;\r\n}\r\n\r\n/* Empty State */\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  color: #9ca3af;\r\n  font-size: 15px;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .sales-dashboard {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .stats-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n  \r\n  .section-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 16px;\r\n  }\r\n  \r\n  .action-buttons {\r\n    width: 100%;\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .view-report-btn,\r\n  .create-invoice-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .stats-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .stat-value {\r\n    font-size: 20px;\r\n  }\r\n}"
 }
]